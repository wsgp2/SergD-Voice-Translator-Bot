# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ DigitalOcean —Å GitHub Actions

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ DigitalOcean](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞-–Ω–∞-digitalocean)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub](#2-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è-–Ω–∞-github)
3. [–°–æ–∑–¥–∞–Ω–∏–µ SSH-–∫–ª—é—á–µ–π –¥–ª—è GitHub Actions](#3-—Å–æ–∑–¥–∞–Ω–∏–µ-ssh-–∫–ª—é—á–µ–π-–¥–ª—è-github-actions)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions](#4-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-github-actions)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞](#5-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–æ—Ç–ª–∞–¥–∫–∞)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è](#6-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–∏-—É–ª—É—á—à–µ–Ω–∏—è)

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ DigitalOcean

### 1.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ Droplet
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ) –Ω–∞ DigitalOcean
2. –ù–∞–∂–º–∏—Ç–µ ¬´Create Droplet¬ª –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Ubuntu 20.04 LTS –∏–ª–∏ 22.04 LTS)
3. –ù–∞ —ç—Ç–∞–ø–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π SSH-–∫–ª—é—á
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω (–¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º)
5. –ó–∞–≤–µ—Ä—à–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ droplet –∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ IP-–∞–¥—Ä–µ—Å

### 1.2. –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH:
```bash
ssh your_username@your_droplet_ip
```

–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–µ–ø–ª–æ—è:
```bash
# –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è deploy –∏ –∑–∞–¥–∞–µ–º –ø–∞—Ä–æ–ª—å
sudo adduser deploy

# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É sudo
sudo usermod -aG sudo deploy

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - deploy
```

### 1.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Python:
```bash
sudo apt update && sudo apt upgrade -y
sudo apt install python3 python3-pip python3-venv git -y

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
mkdir ~/my_python_app
cd ~/my_python_app

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate
```

## 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub

### 2.1. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ª–æ–∫–∞–ª—å–Ω–æ
3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ –∏ requirements.txt

### 2.2. –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```
my-python-app/
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ .github/
    ‚îî‚îÄ‚îÄ workflows/
        ‚îî‚îÄ‚îÄ deploy.yml
```

## 3. –°–æ–∑–¥–∞–Ω–∏–µ SSH-–∫–ª—é—á–µ–π –¥–ª—è GitHub Actions

1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π:
```bash
ssh-keygen -t rsa -b 4096 -C "github-actions-deploy" -f github_actions_key
```

2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
cat github_actions_key.pub >> ~/.ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
```

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions

### 4.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub
–î–æ–±–∞–≤—å—Ç–µ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions:
- `SSH_HOST`: IP-–∞–¥—Ä–µ—Å droplet
- `SSH_USERNAME`: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (deploy)
- `SSH_PRIVATE_KEY`: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

### 4.2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ workflow
–°–æ–∑–¥–∞–π—Ç–µ `.github/workflows/deploy.yml`:

```yaml
name: Deploy Python App to DigitalOcean

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Deploy to DigitalOcean Droplet via SSH
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          port: 22
          script: |
            cd ~/my_python_app
            git pull origin main
            source venv/bin/activate
            pip install -r requirements.txt
            pkill -f app.py || true
            nohup python3 app.py > app.log 2>&1 &
```

## 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

1. –ö–æ–º–º–∏—Ç –∏ –ø—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
git add .
git commit -m "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –¥–µ–ø–ª–æ—è –Ω–∞ DigitalOcean"
git push origin main
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ workflow –Ω–∞ –≤–∫–ª–∞–¥–∫–µ Actions
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–æ—Ü–µ—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd –∏–ª–∏ Supervisor –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Secrets
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è deploy

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack/email
- –î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
